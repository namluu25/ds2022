/*
 * This is sample code generated by rpcgen.
 * These are only templates and you can use them
 * as a guideline for developing your own functions.
 */

#include "write_file.h"

int *
transfer_1_svc(data *argp, struct svc_req *rqstp)
{
	static int  result;

	/*
	 * insert server code here
	 */
	FILE *fp;
	char new_name[1024] = "new_";
	strcat(new_name, argp->file_name);
	fp = fopen(new_name, "ab+");
	if (fp == NULL) {
               printf("Error in writing file\n");
               result = 1;
        } else {
        	printf("Success receiving file\n");
        	fwrite(argp->file_data, 1, 1024, fp);
       	result = 0;
        }
        
	return &result;
}
